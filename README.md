# project4-强力回音壁



## 已完成部分

sever实现了三种模式，分别是：1多线程、2异步select（WSAAsyncSelect）和3多线程+WSAEventSelect。

### 1

使用阻塞套接字，创建监听线程，阻塞接收请求。创建工作线程，阻塞recv并返回报文。界面的消息循环正常运行。

### 2

使用非阻塞套接字，利用自定义事件和消息循环监听请求，由于WSAAsyncSelect默认把接收请求创建出的socket也包含进消息循环中。所以我们可以实现统一处理：如果FD_READ到来，就接收并返回报文。

### 3

把hServSock包含到类中，初始化操作也在类中完成。

总思路是按需求创建多个监听线程，每个线程都用WSAEventSelect同时管理多个子套接字，管理收和发。

但是多个监听线程中，同时只有一个线程是“真正的”在监听。即同时只有一个线程可以接收FD_ACCEPT事件



client中创建多个工作线程，阻塞发、收。

### 未完成部分

sever中三个模式中的收发还未完成。

无难度

client中发收，统计流量和延时模块还都未完成。

收发：无难度

统计流量和延时：

初步打算使用临界区的概念，即CCriticalSection 类。各线程统计自己发、收了多少，延时是多少，写入临界区，最后由主线程显示出来。
